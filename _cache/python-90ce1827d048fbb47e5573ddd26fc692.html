<div class="highlight"><pre><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
<span class="k">if</span> <span class="o">&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">name</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;</span> <span class="o">==</span> <span class="o">&amp;</span><span class="c">#39;&lt;strong&gt;main&lt;/strong&gt;&amp;#39;:&lt;/p&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="c">#Read the Config File to get the twitter keys and tokens&lt;br&gt;</span>
  <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">()</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
  <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="o">&amp;</span><span class="c">#39;settings.cfg&amp;#39;)&lt;/p&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="c">#method, url and parameters to call&lt;br&gt;</span>
  <span class="n">method</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">get</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
  <span class="n">url</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">api</span><span class="o">.</span><span class="n">twitter</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="mf">1.1</span><span class="o">/</span><span class="n">statuses</span><span class="o">/</span><span class="n">user</span><span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="n">timeline</span><span class="o">.</span><span class="n">json</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
  <span class="n">url</span><span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
      <span class="o">&amp;</span><span class="c">#39;exclude_replies&amp;#39;: &amp;#39;true&amp;#39;&lt;br&gt;</span>
  <span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="c">#configuration hash for the keys&lt;br&gt;</span>
  <span class="n">keys</span> <span class="o">=</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
      <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">twitter</span><span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="n">consumer</span><span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="n">secret</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;:</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
          <span class="o">&amp;</span><span class="c">#39;Keys&amp;#39;, &amp;#39;twitter&lt;em&gt;consumer&lt;/em&gt;secret&amp;#39;),&lt;br&gt;</span>
      <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">twitter</span><span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="n">consumer</span><span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="n">key</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;:</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">&amp;</span><span class="c">#39;Keys&amp;#39;, &amp;#39;twitter&lt;em&gt;consumer&lt;/em&gt;key&amp;#39;),&lt;br&gt;</span>
      <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">access</span><span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="n">token</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;:</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">&amp;</span><span class="c">#39;Keys&amp;#39;, &amp;#39;access&lt;/em&gt;token&amp;#39;),&lt;br&gt;</span>
      <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">access</span><span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="n">token</span><span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="n">secret</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;:</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">&amp;</span><span class="c">#39;Keys&amp;#39;, &amp;#39;access&lt;em&gt;token&lt;/em&gt;secret&amp;#39;)&lt;br&gt;</span>
  <span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">oauth</span><span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">get</span><span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="n">oauth</span><span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="n">parameters</span><span class="p">(</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
      <span class="n">keys</span><span class="p">[</span><span class="o">&amp;</span><span class="c">#39;twitter&lt;/em&gt;consumer&lt;em&gt;key&amp;#39;],&lt;br&gt;</span>
      <span class="n">keys</span><span class="p">[</span><span class="o">&amp;</span><span class="c">#39;access&lt;/em&gt;token&amp;#39;]&lt;br&gt;</span>
  <span class="p">)</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">oauth</span><span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="n">parameters</span><span class="p">[</span><span class="o">&amp;</span><span class="c">#39;oauth&lt;/em&gt;signature&amp;#39;] = generate&lt;em&gt;signature(&lt;br&gt;</span>
      <span class="n">method</span><span class="p">,</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
      <span class="n">url</span><span class="p">,</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
      <span class="n">url</span><span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="n">parameters</span><span class="p">,</span> <span class="n">oauth</span><span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="n">parameters</span><span class="p">,</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
      <span class="n">keys</span><span class="p">[</span><span class="o">&amp;</span><span class="c">#39;twitter&lt;/em&gt;consumer&lt;em&gt;key&amp;#39;],&lt;br&gt;</span>
      <span class="n">keys</span><span class="p">[</span><span class="o">&amp;</span><span class="c">#39;twitter&lt;/em&gt;consumer&lt;em&gt;secret&amp;#39;],&lt;br&gt;</span>
      <span class="n">keys</span><span class="p">[</span><span class="o">&amp;</span><span class="c">#39;access&lt;/em&gt;token_secret&amp;#39;]&lt;br&gt;</span>
  <span class="p">)</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="o">&amp;</span><span class="c">#39;Authorization&amp;#39;: create&lt;em&gt;auth&lt;/em&gt;header(oauth_parameters)}&lt;/p&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">url</span> <span class="o">+=</span> <span class="o">&amp;</span><span class="c">#39;?&amp;#39; + urllib.urlencode(url_parameters)&lt;/p&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">print</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">),</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
</pre></div>