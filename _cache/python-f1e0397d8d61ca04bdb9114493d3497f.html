<div class="highlight"><pre><span class="n">url</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.flickr.com/services/oauth/request_token&quot;</span><span class="o">&gt;</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">flickr</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">services</span><span class="o">/</span><span class="n">oauth</span><span class="o">/</span><span class="n">request_token</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">h1</span> <span class="nb">id</span><span class="o">=</span><span class="s">&quot;toc_135&quot;</span><span class="o">&gt;</span><span class="n">Set</span> <span class="n">the</span> <span class="n">base</span> <span class="n">oauth_</span><span class="o">*</span> <span class="n">parameters</span> <span class="n">along</span> <span class="k">with</span> <span class="nb">any</span> <span class="n">other</span> <span class="n">parameters</span> <span class="n">required</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">h1</span> <span class="nb">id</span><span class="o">=</span><span class="s">&quot;toc_136&quot;</span><span class="o">&gt;</span><span class="k">for</span> <span class="n">the</span> <span class="n">API</span> <span class="n">call</span><span class="o">.&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">&amp;</span><span class="c">#39;oauth_timestamp&amp;#39;: str(int(time.time())),</span>
    <span class="o">&amp;</span><span class="c">#39;oauth_signature_method&amp;#39;:&amp;quot;HMAC-SHA1&amp;quot;,</span>
    <span class="o">&amp;</span><span class="c">#39;oauth_version&amp;#39;: &amp;quot;1.0&amp;quot;,</span>
    <span class="o">&amp;</span><span class="c">#39;oauth_callback&amp;#39;: &amp;quot;&lt;a href=&quot;http://www.mkelsey.com&quot;&gt;http://www.mkelsey.com&lt;/a&gt;&amp;quot;,</span>
    <span class="o">&amp;</span><span class="c">#39;oauth_nonce&amp;#39;: oauth.generate_nonce(),</span>
    <span class="o">&amp;</span><span class="c">#39;oauth_consumer_key&amp;#39;: keys.apikey</span>
<span class="p">}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">h1</span> <span class="nb">id</span><span class="o">=</span><span class="s">&quot;toc_137&quot;</span><span class="o">&gt;</span><span class="n">Setup</span> <span class="n">the</span> <span class="n">Consumer</span> <span class="k">with</span> <span class="n">the</span> <span class="n">api_keys</span> <span class="n">given</span> <span class="n">by</span> <span class="n">the</span> <span class="n">provider</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">consumer</span> <span class="o">=</span> <span class="n">oauth</span><span class="o">.</span><span class="n">Consumer</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">keys</span><span class="o">.</span><span class="n">apikey</span><span class="p">,</span> <span class="n">secret</span><span class="o">=</span><span class="n">keys</span><span class="o">.</span><span class="n">apisecret</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">h1</span> <span class="nb">id</span><span class="o">=</span><span class="s">&quot;toc_138&quot;</span><span class="o">&gt;</span><span class="n">Create</span> <span class="n">our</span> <span class="n">request</span><span class="o">.</span> <span class="n">Change</span> <span class="n">method</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span> <span class="n">accordingly</span><span class="o">.&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">req</span> <span class="o">=</span> <span class="n">oauth</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">method</span><span class="o">=&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">GET</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">params</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">h1</span> <span class="nb">id</span><span class="o">=</span><span class="s">&quot;toc_139&quot;</span><span class="o">&gt;</span><span class="n">Create</span> <span class="n">the</span> <span class="n">signature</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">signature</span> <span class="o">=</span> <span class="n">oauth</span><span class="o">.</span><span class="n">SignatureMethod_HMAC_SHA1</span><span class="p">()</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="n">consumer</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">h1</span> <span class="nb">id</span><span class="o">=</span><span class="s">&quot;toc_140&quot;</span><span class="o">&gt;</span><span class="n">Add</span> <span class="n">the</span> <span class="n">Signature</span> <span class="n">to</span> <span class="n">the</span> <span class="n">request</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">req</span><span class="p">[</span><span class="o">&amp;</span><span class="c">#39;oauth_signature&amp;#39;] = signature&lt;/p&gt;</span>

<span class="o">&lt;</span><span class="n">h1</span> <span class="nb">id</span><span class="o">=</span><span class="s">&quot;toc_141&quot;</span><span class="o">&gt;</span><span class="n">Make</span> <span class="n">the</span> <span class="n">request</span> <span class="n">to</span> <span class="n">get</span> <span class="n">the</span> <span class="n">oauth_token</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">oauth_token_secret</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">h1</span> <span class="nb">id</span><span class="o">=</span><span class="s">&quot;toc_142&quot;</span><span class="o">&gt;</span><span class="n">I</span> <span class="n">had</span> <span class="n">to</span> <span class="n">directly</span> <span class="n">use</span> <span class="n">the</span> <span class="n">httplib2</span> <span class="n">here</span><span class="p">,</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">the</span> <span class="n">oauth</span> <span class="n">library</span><span class="o">.&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">h</span> <span class="o">=</span> <span class="n">httplib2</span><span class="o">.</span><span class="n">Http</span><span class="p">(</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="o">.</span><span class="n">cache</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;)</span>
<span class="n">resp</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">to_url</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">GET</span><span class="o">&amp;</span><span class="n">quot</span><span class="p">;)</span>
</pre></div>